<% if current_user.posts.empty? %>
  <div class="groups">
    <h2 class="title">スタートガイド</h2>
    <ul>
      <li>
          <div><%= link_to '自分の好きなものを追加しよう！', user_path(current_user), class: "requests" %></div>
      </li>
    </ul>
  </div>
<% end %>
<div class="wrapper">
  <div class="main-area">
    <div class="groups">
      <h2 class="title">参加中のグループ</h2>
      <% if @groups.exists? %>
        <div class="group-index">
          <% @groups.each do |group| %>
            <%= link_to group_path(group), class: "group" do %>
              <div class="profile">
                <h3 class="name"><%= group.name %></h3>
                <p class="status"><%= group.description %></p>
              </div>
              <div class="group-data">
                <p>メンバー数：<%= group.users.count %>人</p>
              </div>
            <% end %>
          <% end %>
        </div>
      <% else %>
        <div><br/></div>
      <% end %>
    </div>
    <% if @requests.exists? %>
      <div class="groups">
        <h2 class="title">リクエスト中のグループ</h2>
        <ul>
          <% @requests.each do |request| %>
            <li class="requested-group">
              <%= link_to request.group.name, group_path(request.group), class: "link" %>
              <%= link_to '取り消し', group_request_path(request.group.id, request.id), class: "delete", method: :delete, data: { confirm: 'リクエストを取り下げますか？' } %>
            </li>
          <% end %>
        </ul>
      </div>
  <% end %>
  </div>
  <div class="sub-area">
    <div class="action">
      <h2><%= fa_icon "search" %> 仲間を見つける</h2>
      <%= form_with url: search_users_path, method: :get, local: true, class: "search" do |f| %>
        <%= f.search_field :keyword, placeholder: "ユーザー名", class: "form" %>
        <%= f.submit "検索", class: "form-button" %>
      <% end %>
    </div>
    <div class="action">
      <h2><%= fa_icon "search" %> グループをさがす</h2>
      <%= form_with url: search_groups_path, method: :get, local: true, class: "search" do |f| %>
        <%= f.search_field :keyword, placeholder: "グループ名", class: "form" %>
        <%= f.submit "検索", class: "form-button" %>
      <% end %>
    </div>
    <div class="action">
      <h2>グループをつくる</h2>
      <%= form_with model: @group, url:{ controller: 'groups', action: 'create'}, local: true, class: "new" do |f| %>
        <div class="field">
          <%= f.label :name, "グループ名", class: "label" %>
          <%= f.text_field :name, class: "form" %>
        </div>
        <div class="field">
          <%= f.label :description, "概要説明", class: "label" %>
          <%= f.text_area :description, class: "form" %>
        </div>
        <div class="field">
          <%= f.label :public, "公開設定", class: "label" %>
          <div class="radio">
            <label><%= f.radio_button :public, true %> 参加リクエスト可能</label>
          </div>
          <div class="radio">
            <label><%= f.radio_button :public, false, checked: true %> メンバーによる招待制</label>
          </div>
        </div>
        <%= f.submit "作成", class: "form-button new-group" %>
      <% end %>
    </div>
  </div>
</div>